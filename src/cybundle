#!/bin/bash
set -u
cd ~

# check if the directory exists
if [ -d ~/cy/ ]; then
  cd ~/cy/
  git stash
  git pull
  git stash pop
else
  mkdir ~/cy/
  git clone https://github.com/cyber-prophet/cy ~/cy/
fi

nu --no-config-file --no-std-lib --execute 'if ($nu.config-path | path exists | not $in) {config nu --default | save -r $nu.config-path};
    if ($nu.env-path | path exists | not $in) {config env --default | save -r $nu.config-path}' # the command to create default config and env
nu --execute 'source ~/cy/kickstart/setup-cy.nu'
